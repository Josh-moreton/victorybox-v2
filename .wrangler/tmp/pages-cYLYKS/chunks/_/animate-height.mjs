import{d as t,b as e,a7 as i,ae as a,af as n,h as o,ah as s}from"../routes/renderer.mjs";var objectOmit=function(t,e){var i={};"string"==typeof e&&(e=[].slice.call(arguments,1));for(var a in t)t.hasOwnProperty&&!t.hasOwnProperty(a)||-1===e.indexOf(a)&&(i[a]=t[a]);return i};function cancelAnimationFrames(t){for(const e of t)cancelAnimationFrame(e)}function isNumber(t){return"string"==typeof t&&(t=Number(t)),!Number.isNaN(t)&&Number.isFinite(t)}function isPercentage(t){return"string"==typeof t&&t.search("%")===t.length-1&&isNumber(t.slice(0,Math.max(0,t.length-1)))}const r={animating:"vah-animating",animatingUp:"vah-animating--up",animatingDown:"vah-animating--down",animatingToHeightZero:"vah-animating--to-height-zero",animatingToHeightAuto:"vah-animating--to-height-auto",animatingToHeightSpecific:"vah-animating--to-height-specific",static:"vah-static",staticHeightZero:"vah-static--height-zero",staticHeightAuto:"vah-static--height-auto",staticHeightSpecific:"vah-static--height-specific"},h=["animateOpacity","animationStateClasses","applyInlineTransitions","contentClass","class","delay","duration","easing","height"],l=t({props:{ariaHidden:{type:Boolean},animateOpacity:{type:Boolean,default:!1},animationStateClasses:{type:Object,default:r},applyInlineTransitions:{type:Boolean,default:!0},contentClass:{type:String,default:void 0},delay:{type:Number,default:0},duration:{type:Number,default:250},easing:{type:String,default:"ease"},height:{type:[String,Number],validator:t=>!!("number"==typeof t&&t>=0||isPercentage(t)||"auto"===t)||(console.error(`value "${t}" of type "${typeof t}" is invalid type for \`height\` in \`AnimateHeight\`. It needs to be a positive number, string "auto" or percentage string (e.g. "15%").`),!1),required:!0},id:{type:String,default:void 0}},emits:{animationEnd:t=>t,animationStart:t=>t},setup(t,{slots:l,emit:u,attrs:g}){const c=e();let m=[],d="auto",v="visible";function hideContent(t){0===t&&(c.value.style.display="none")}isNumber(t.height)?(d=Math.max(0,Number(t.height)),v="hidden"):isPercentage(t.height)&&(d="0%"===t.height?0:t.height,v="hidden");const p={...r,...t.animationStateClasses};function getStaticStateClasses(t){return{[p.static]:!0,[p.staticHeightZero]:0===t,[p.staticHeightSpecific]:"number"==typeof t&&t>0,[p.staticHeightAuto]:"auto"===t}}const f=getStaticStateClasses(d);const{prevState:y,updateState:S,state:T}=function(){const t=e({animationStateClasses:f,height:d,overflow:v,shouldUseTransitions:!1}),i=e(t.value);return{prevState:s(i),updateState:function(e){i.value=t.value,t.value=e},state:s(t)}}();let b,H;i((()=>{const{height:t}=T.value;void 0!==c.value?.style&&null!==t&&hideContent(t)}));let w=d;return a((()=>{const{delay:e,duration:i,height:a}=t;if(void 0===c.value||a===w)return;const n=w;w=a,void 0!==y.value.height&&function(t){0===t&&(c.value.style.display="")}(y.value.height),c.value.style.overflow="hidden";const o=c.value.offsetHeight;c.value.style.overflow="";const s=i+e;let r;const h={overflow:"hidden"},l="auto"===n;isNumber(a)?(r=Math.max(0,Number(a)),h.height=r):isPercentage(a)?(r="0%"===a?0:a,h.height=r):(r=o,h.height="auto",h.overflow=null),l&&(h.height=r,r=o);const g={[p.animating]:!0,[p.animatingUp]:void 0!==n&&("auto"===n||a<n),[p.animatingDown]:void 0!==n&&("auto"===a||a>n),[p.animatingToHeightZero]:0===h.height,[p.animatingToHeightAuto]:"auto"===h.height,[p.animatingToHeightSpecific]:h.height>0},d=getStaticStateClasses(h.height);S({animationStateClasses:g,height:r,overflow:"hidden",shouldUseTransitions:!l}),null!==b&&clearTimeout(b),clearTimeout(H),l?(h.shouldUseTransitions=!0,cancelAnimationFrames(m),m=function(t){const e=[];return e[0]=requestAnimationFrame((()=>{e[1]=requestAnimationFrame((()=>{t()}))})),e}((()=>{S({...T.value,...h}),u("animationStart",{newHeight:h.height})})),H=setTimeout((()=>{S({...T.value,animationStateClasses:d,shouldUseTransitions:!1}),null!==h.height&&void 0!==h.height&&hideContent(h.height),u("animationEnd",{newHeight:h.height})}),s)):(u("animationStart",{newHeight:r}),b=setTimeout((()=>{h.animationStateClasses=d,h.shouldUseTransitions=!1,S({...T.value,...h}),"auto"!==a&&hideContent(r),u("animationEnd",{newHeight:r})}),s))})),n((()=>{cancelAnimationFrames(m),null!==b&&clearTimeout(b),clearTimeout(H),b=null})),()=>{const{animateOpacity:e,applyInlineTransitions:i,contentClass:a,easing:n,id:s}=t,{duration:r,delay:u}=function(){const{delay:e,duration:i}=t;return{delay:e,duration:i}}(),{height:m,overflow:d,animationStateClasses:v,shouldUseTransitions:p}=T.value,f=g.style,y="number"==typeof m?`${m}px`:m??void 0,S={...f,height:y,overflow:d??f?.overflow};p&&i&&(S.transition=`height ${r}ms ${n} ${u}ms`,null!=f?.transition&&(S.transition=`${f.transition}, ${S.transition}`),S.WebkitTransition=S.transition);const b={};e&&(b.transition=`opacity ${r}ms ${n} ${u}ms`,b.WebkitTransition=b.transition,0===m&&(b.opacity=0));const H=void 0!==t.ariaHidden?t.ariaHidden:0===m;return o("div",{...objectOmit(t,h),"aria-hidden":H,class:[v,g.class],id:s,style:S},[o("div",{class:a,style:b,ref:c},l.default?.())])}}});export{l as A};
//# sourceMappingURL=animate-height.mjs.map
