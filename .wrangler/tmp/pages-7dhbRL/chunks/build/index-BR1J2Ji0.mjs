import{M as e,N as t,v as n,r as o,O as r,P as s,Q as i}from"./server.mjs";import{L as a,M as c}from"../runtime.mjs";import{u as l}from"./asyncData-Bhg2FZUP.mjs";import{d as u,c as m,h as d,a4 as f}from"../routes/renderer.mjs";const p=Object.freeze({width:null,height:null}),h=Object.freeze({...p,...a});const g=/(-?[0-9.]*[0-9]+[0-9.]*)/g,v=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function calculateSize(e,t,n){if(1===t)return e;if(n=n||100,"number"==typeof e)return Math.ceil(e*t*n)/n;if("string"!=typeof e)return e;const o=e.split(g);if(null===o||!o.length)return e;const r=[];let s=o.shift(),i=v.test(s);for(;;){if(i){const e=parseFloat(s);isNaN(e)?r.push(s):r.push(Math.ceil(e*t*n)/n)}else r.push(s);if(s=o.shift(),void 0===s)return r.join("");i=!i}}const isUnsetKeyword=e=>"unset"===e||"undefined"===e||"none"===e;function getCommonCSSRules(e){const t={display:"inline-block",width:"1em",height:"1em"},n=e.varName;switch(e.pseudoSelector&&(t.content="''"),e.mode){case"background":n&&(t["background-image"]="var(--"+n+")"),t["background-repeat"]="no-repeat",t["background-size"]="100% 100%";break;case"mask":t["background-color"]="currentColor",n&&(t["mask-image"]=t["-webkit-mask-image"]="var(--"+n+")"),t["mask-repeat"]=t["-webkit-mask-repeat"]="no-repeat",t["mask-size"]=t["-webkit-mask-size"]="100% 100%"}return t}function generateItemCSSRules(e,t){const n={},o=t.varName,r=function(e,t){const n={...c,...e},o={...h,...t},r={left:n.left,top:n.top,width:n.width,height:n.height};let s=n.body;[n,o].forEach((e=>{const t=[],n=e.hFlip,o=e.vFlip;let i,a=e.rotate;switch(n?o?a+=2:(t.push("translate("+(r.width+r.left).toString()+" "+(0-r.top).toString()+")"),t.push("scale(-1 1)"),r.top=r.left=0):o&&(t.push("translate("+(0-r.left).toString()+" "+(r.height+r.top).toString()+")"),t.push("scale(1 -1)"),r.top=r.left=0),a<0&&(a-=4*Math.floor(a/4)),a%=4,a){case 1:i=r.height/2+r.top,t.unshift("rotate(90 "+i.toString()+" "+i.toString()+")");break;case 2:t.unshift("rotate(180 "+(r.width/2+r.left).toString()+" "+(r.height/2+r.top).toString()+")");break;case 3:i=r.width/2+r.left,t.unshift("rotate(-90 "+i.toString()+" "+i.toString()+")")}a%2==1&&(r.left!==r.top&&(i=r.left,r.left=r.top,r.top=i),r.width!==r.height&&(i=r.width,r.width=r.height,r.height=i)),t.length&&(s=function(e,t,n){const o=function(e,t="defs"){let n="";const o=e.indexOf("<"+t);for(;o>=0;){const r=e.indexOf(">",o),s=e.indexOf("</"+t);if(-1===r||-1===s)break;const i=e.indexOf(">",s);if(-1===i)break;n+=e.slice(r+1,s).trim(),e=e.slice(0,o).trim()+e.slice(i+1)}return{defs:n,content:e}}(e);return r=o.defs,s=t+o.content+n,r?"<defs>"+r+"</defs>"+s:s;var r,s}(s,'<g transform="'+t.join(" ")+'">',"</g>"))}));const i=o.width,a=o.height,l=r.width,u=r.height;let m,d;null===i?(d=null===a?"1em":"auto"===a?u:a,m=calculateSize(d,l/u)):(m="auto"===i?l:i,d=null===a?calculateSize(m,u/l):"auto"===a?u:a);const f={},setAttr=(e,t)=>{isUnsetKeyword(t)||(f[e]=t.toString())};setAttr("width",m),setAttr("height",d);const p=[r.left,r.top,l,u];return f.viewBox=p.join(" "),{attributes:f,viewBox:p,body:s}}(e);let s=r.viewBox;s[2]!==s[3]&&(t.forceSquare?s=function(e){const[t,n,o,r]=e;if(o!==r){const e=Math.max(o,r);return[t-(e-o)/2,n-(e-r)/2,e,e]}return e}(s):n.width=calculateSize("1em",s[2]/s[3]));const i=function(e){return'url("'+function(e){return"data:image/svg+xml,"+function(e){return e.replace(/"/g,"'").replace(/%/g,"%25").replace(/#/g,"%23").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/\s+/g," ")}(e)}(e)+'")'}(function(e,t){let n=-1===e.indexOf("xlink:")?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const e in t)n+=" "+e+'="'+t[e]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+n+">"+e+"</svg>"}(r.body.replace(/currentColor/g,t.color||"black"),{viewBox:`${s[0]} ${s[1]} ${s[2]} ${s[3]}`,width:`${s[2]}`,height:`${s[3]}`}));if(o)n["--"+o]=i;else switch(t.mode){case"background":n["background-image"]=i;break;case"mask":n["mask-image"]=n["-webkit-mask-image"]=i}return n}const S={selectorStart:{compressed:"{",compact:" {",expanded:" {"},selectorEnd:{compressed:"}",compact:"; }\n",expanded:";\n}\n"},rule:{compressed:"{key}:",compact:" {key}: ",expanded:"\n  {key}: "}};function getIconCSS(e,t={}){const n=t.customise?t.customise(e.body):e.body,o=t.mode||(t.color||!n.includes("currentColor")?"background":"mask");let r=t.varName;void 0===r&&"mask"===o&&(r="svg");const s={...t,mode:o,varName:r};"background"===o&&delete s.varName;const i={...t.rules,...getCommonCSSRules(s),...generateItemCSSRules({...c,...e,body:n},s)};return function(e,t="expanded"){const n=[];for(let o=0;o<e.length;o++){const{selector:r,rules:s}=e[o];let i=(r instanceof Array?r.join("compressed"===t?",":", "):r)+S.selectorStart[t],a=!0;for(const e in s)a||(i+=";"),i+=S.rule[t].replace("{key}",e)+s[e],a=!1;i+=S.selectorEnd[t],n.push(i)}return n.join("compressed"===t?"":"\n")}([{selector:t.iconSelector||".icon",rules:i}],s.format)}async function loadIcon(e,t){if(!e)return null;const n=s(e);if(n)return n;let o;const r=i(e).catch((()=>null));return t>0?await Promise.race([r,new Promise((e=>{o=setTimeout((()=>{e()}),t)}))]).finally((()=>clearTimeout(o))):await r,s(e)}function useResolvedName(e){const n=t().icon,o=(n.collections||[]).sort(((e,t)=>t.length-e.length));return m((()=>{var t;const r=e(),s=r.startsWith(n.cssSelectorPrefix)?r.slice(n.cssSelectorPrefix.length):r,i=(null==(t=n.aliases)?void 0:t[s])||s;if(!i.includes(":")){const e=o.find((e=>i.startsWith(e+"-")));return e?e+":"+i.slice(e.length+1):i}return i}))}const w="NUXT_ICONS_SERVER_CSS";const k=u({name:"NuxtIconCss",props:{name:{type:String,required:!0},customize:{type:Function,required:!1}},setup(r){var s;const i=e(),a=t().icon,c=m((()=>r.name?a.cssSelectorPrefix+r.name:"")),l=m((()=>"."+function(e){return e.replace(/([^\w-])/g,"\\$1")}(c.value)));{const e=n().icon||{};(null==(s=null==e?void 0:e.serverKnownCssClasses)?void 0:s.includes(c.value))||f((async()=>{const e=await loadIcon(r.name,a.fetchTimeout).catch((()=>null));if(!e)return null;let t=i.vueApp._context.provides[w];if(t||(t=i.vueApp._context.provides[w]=new Map,i.runWithContext((()=>{o({style:[()=>{let e=Array.from(t.values()).sort().join("");return a.cssLayer&&(e=`@layer ${a.cssLayer} {${e}}`),{innerHTML:e}}]},{tagPriority:"low"})}))),r.name&&!t.has(r.name)){const n=function(e,t=!0){let n=l.value;a.cssWherePseudo&&(n=`:where(${n})`);const o=getIconCSS(e,{iconSelector:n,format:"compressed",customise:r.customize});return a.cssLayer&&t?`@layer ${a.cssLayer} { ${o} }`:o}(e,!1);t.set(r.name,n)}return null}))}return()=>d("span",{class:["iconify",c.value]})}}),y=u({name:"NuxtIconSvg",props:{name:{type:String,required:!0},customize:{type:Function,required:!1}},setup(n,{slots:o}){e();const s=t().icon,i=useResolvedName((()=>n.name)),a="i-"+i.value;return i.value&&l(a,(()=>loadIcon(i.value,s.fetchTimeout)),{deep:!1}),()=>d(r,{icon:i.value,ssr:!0,customise:n.customize},o)}}),b=u({name:"NuxtIcon",props:{name:{type:String,required:!0},mode:{type:String,required:!1,default:null},size:{type:[Number,String],required:!1,default:null},customize:{type:Function,required:!1}},setup(n,{slots:o}){const r=e(),s=t().icon,i=useResolvedName((()=>n.name)),a=m((()=>{var e;return(null==(e=r.vueApp)?void 0:e.component(i.value))||("svg"===(n.mode||s.mode)?y:k)})),c=m((()=>{const e=n.size||s.size;return e?{fontSize:Number.isNaN(+e)?e:e+"px"}:null})),l=n.customize||s.customize;return()=>d(a.value,{...s.attrs,name:i.value,class:s.class,style:c.value,customize:l},o)}});export{b as default};
//# sourceMappingURL=index-BR1J2Ji0.mjs.map
