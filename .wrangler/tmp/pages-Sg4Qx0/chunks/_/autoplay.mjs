import{g as e}from"./swiper-vue.mjs";function Autoplay(a){let t,n,{swiper:i,extendParams:r,on:o,emit:s,params:p}=a;i.autoplay={running:!1,paused:!1,timeLeft:0},r({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!0,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});let l,u,d,y,m,c,v,g=p&&p.autoplay?p.autoplay.delay:3e3,T=p&&p.autoplay?p.autoplay.delay:3e3,E=(new Date).getTime;function onTransitionEnd(e){i&&!i.destroyed&&i.wrapperEl&&e.target===i.wrapperEl&&(i.wrapperEl.removeEventListener("transitionend",onTransitionEnd),resume())}const calcTimeLeft=()=>{if(i.destroyed||!i.autoplay.running)return;i.autoplay.paused?u=!0:u&&(T=l,u=!1);const e=i.autoplay.paused?l:E+T-(new Date).getTime();i.autoplay.timeLeft=e,s("autoplayTimeLeft",e,e/g),n=requestAnimationFrame((()=>{calcTimeLeft()}))},run=e=>{if(i.destroyed||!i.autoplay.running)return;cancelAnimationFrame(n),calcTimeLeft();let a=void 0===e?i.params.autoplay.delay:e;g=i.params.autoplay.delay,T=i.params.autoplay.delay;const r=(()=>{let e;if(e=i.virtual&&i.params.virtual.enabled?i.slides.filter((e=>e.classList.contains("swiper-slide-active")))[0]:i.slides[i.activeIndex],!e)return;return parseInt(e.getAttribute("data-swiper-autoplay"),10)})();!Number.isNaN(r)&&r>0&&void 0===e&&(a=r,g=r,T=r),l=a;const o=i.params.speed,proceed=()=>{i&&!i.destroyed&&(i.params.autoplay.reverseDirection?!i.isBeginning||i.params.loop||i.params.rewind?(i.slidePrev(o,!0,!0),s("autoplay")):i.params.autoplay.stopOnLastSlide||(i.slideTo(i.slides.length-1,o,!0,!0),s("autoplay")):!i.isEnd||i.params.loop||i.params.rewind?(i.slideNext(o,!0,!0),s("autoplay")):i.params.autoplay.stopOnLastSlide||(i.slideTo(0,o,!0,!0),s("autoplay")),i.params.cssMode&&(E=(new Date).getTime(),requestAnimationFrame((()=>{run()}))))};return a>0?(clearTimeout(t),t=setTimeout((()=>{proceed()}),a)):requestAnimationFrame((()=>{proceed()})),a},start=()=>{i.autoplay.running=!0,run(),s("autoplayStart")},stop=()=>{i.autoplay.running=!1,clearTimeout(t),cancelAnimationFrame(n),s("autoplayStop")},pause=(e,a)=>{if(i.destroyed||!i.autoplay.running)return;clearTimeout(t),e||(v=!0);const proceed=()=>{s("autoplayPause"),i.params.autoplay.waitForTransition?i.wrapperEl.addEventListener("transitionend",onTransitionEnd):resume()};if(i.autoplay.paused=!0,a)return c&&(l=i.params.autoplay.delay),c=!1,void proceed();const n=l||i.params.autoplay.delay;l=n-((new Date).getTime()-E),i.isEnd&&l<0&&!i.params.loop||(l<0&&(l=0),proceed())},resume=()=>{i.isEnd&&l<0&&!i.params.loop||i.destroyed||!i.autoplay.running||(E=(new Date).getTime(),v?(v=!1,run(l)):run(),i.autoplay.paused=!1,s("autoplayResume"))},onVisibilityChange=()=>{if(i.destroyed||!i.autoplay.running)return;const a=e();"hidden"===a.visibilityState&&(v=!0,pause(!0)),"visible"===a.visibilityState&&resume()},onPointerEnter=e=>{"mouse"===e.pointerType&&(v=!0,i.animating||i.autoplay.paused||pause(!0))},onPointerLeave=e=>{"mouse"===e.pointerType&&i.autoplay.paused&&resume()};o("init",(()=>{i.params.autoplay.enabled&&(i.params.autoplay.pauseOnMouseEnter&&(i.el.addEventListener("pointerenter",onPointerEnter),i.el.addEventListener("pointerleave",onPointerLeave)),e().addEventListener("visibilitychange",onVisibilityChange),E=(new Date).getTime(),start())})),o("destroy",(()=>{i.el.removeEventListener("pointerenter",onPointerEnter),i.el.removeEventListener("pointerleave",onPointerLeave),e().removeEventListener("visibilitychange",onVisibilityChange),i.autoplay.running&&stop()})),o("beforeTransitionStart",((e,a,t)=>{!i.destroyed&&i.autoplay.running&&(t||!i.params.autoplay.disableOnInteraction?pause(!0,!0):stop())})),o("sliderFirstMove",(()=>{!i.destroyed&&i.autoplay.running&&(i.params.autoplay.disableOnInteraction?stop():(d=!0,y=!1,v=!1,m=setTimeout((()=>{v=!0,y=!0,pause(!0)}),200)))})),o("touchEnd",(()=>{if(!i.destroyed&&i.autoplay.running&&d){if(clearTimeout(m),clearTimeout(t),i.params.autoplay.disableOnInteraction)return y=!1,void(d=!1);y&&i.params.cssMode&&resume(),y=!1,d=!1}})),o("slideChange",(()=>{!i.destroyed&&i.autoplay.running&&(c=!0)})),Object.assign(i.autoplay,{start:start,stop:stop,pause:pause,resume:resume})}export{Autoplay as A};
//# sourceMappingURL=autoplay.mjs.map
