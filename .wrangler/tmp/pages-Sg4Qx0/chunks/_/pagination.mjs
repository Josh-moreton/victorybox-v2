import{c as e}from"./create-element-if-not-defined.mjs";import{e as a,b as s,c as l}from"./swiper-vue.mjs";function classesToSelector(e){return void 0===e&&(e=""),`.${e.trim().replace(/([\.:!+\/])/g,"\\$1").replace(/ /g,".")}`}function Pagination(t){let{swiper:i,extendParams:n,on:r,emit:o}=t;const p="swiper-pagination";let c;n({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:e=>e,formatFractionTotal:e=>e,bulletClass:`${p}-bullet`,bulletActiveClass:`${p}-bullet-active`,modifierClass:`${p}-`,currentClass:`${p}-current`,totalClass:`${p}-total`,hiddenClass:`${p}-hidden`,progressbarFillClass:`${p}-progressbar-fill`,progressbarOppositeClass:`${p}-progressbar-opposite`,clickableClass:`${p}-clickable`,lockClass:`${p}-lock`,horizontalClass:`${p}-horizontal`,verticalClass:`${p}-vertical`,paginationDisabledClass:`${p}-disabled`}}),i.pagination={el:null,bullets:[]};let d=0;const makeElementsArray=e=>(Array.isArray(e)?e:[e]).filter((e=>!!e));function isPaginationDisabled(){return!i.params.pagination.el||!i.pagination.el||Array.isArray(i.pagination.el)&&0===i.pagination.el.length}function setSideBullets(e,a){const{bulletActiveClass:s}=i.params.pagination;e&&(e=e[("prev"===a?"previous":"next")+"ElementSibling"])&&(e.classList.add(`${s}-${a}`),(e=e[("prev"===a?"previous":"next")+"ElementSibling"])&&e.classList.add(`${s}-${a}-${a}`))}function onBulletClick(e){const a=e.target.closest(classesToSelector(i.params.pagination.bulletClass));if(!a)return;e.preventDefault();const l=s(a)*i.params.slidesPerGroup;if(i.params.loop){if(i.realIndex===l)return;const e=i.realIndex,a=i.getSlideIndexByData(l),s=i.getSlideIndexByData(i.realIndex),loopFix=s=>{const l=i.activeIndex;i.loopFix({direction:s,activeSlideIndex:a,slideTo:!1});l===i.activeIndex&&i.slideToLoop(e,0,!1,!0)};if(a>i.slides.length-i.loopedSlides)loopFix(a>s?"next":"prev");else if(i.params.centeredSlides){const e="auto"===i.params.slidesPerView?i.slidesPerViewDynamic():Math.ceil(parseFloat(i.params.slidesPerView,10));a<Math.floor(e/2)&&loopFix("prev")}i.slideToLoop(l)}else i.slideTo(l)}function update(){const e=i.rtl,l=i.params.pagination;if(isPaginationDisabled())return;let t,n,r=i.pagination.el;r=makeElementsArray(r);const p=i.virtual&&i.params.virtual.enabled?i.virtual.slides.length:i.slides.length,u=i.params.loop?Math.ceil(p/i.params.slidesPerGroup):i.snapGrid.length;if(i.params.loop?(n=i.previousRealIndex||0,t=i.params.slidesPerGroup>1?Math.floor(i.realIndex/i.params.slidesPerGroup):i.realIndex):void 0!==i.snapIndex?(t=i.snapIndex,n=i.previousSnapIndex):(n=i.previousIndex||0,t=i.activeIndex||0),"bullets"===l.type&&i.pagination.bullets&&i.pagination.bullets.length>0){const o=i.pagination.bullets;let p,u,g;if(l.dynamicBullets&&(c=a(o[0],i.isHorizontal()?"width":"height"),r.forEach((e=>{e.style[i.isHorizontal()?"width":"height"]=c*(l.dynamicMainBullets+4)+"px"})),l.dynamicMainBullets>1&&void 0!==n&&(d+=t-(n||0),d>l.dynamicMainBullets-1?d=l.dynamicMainBullets-1:d<0&&(d=0)),p=Math.max(t-d,0),u=p+(Math.min(o.length,l.dynamicMainBullets)-1),g=(u+p)/2),o.forEach((e=>{const a=[...["","-next","-next-next","-prev","-prev-prev","-main"].map((e=>`${l.bulletActiveClass}${e}`))].map((e=>"string"==typeof e&&e.includes(" ")?e.split(" "):e)).flat();e.classList.remove(...a)})),r.length>1)o.forEach((e=>{const a=s(e);a===t?e.classList.add(...l.bulletActiveClass.split(" ")):i.isElement&&e.setAttribute("part","bullet"),l.dynamicBullets&&(a>=p&&a<=u&&e.classList.add(...`${l.bulletActiveClass}-main`.split(" ")),a===p&&setSideBullets(e,"prev"),a===u&&setSideBullets(e,"next"))}));else{const e=o[t];if(e&&e.classList.add(...l.bulletActiveClass.split(" ")),i.isElement&&o.forEach(((e,a)=>{e.setAttribute("part",a===t?"bullet-active":"bullet")})),l.dynamicBullets){const e=o[p],a=o[u];for(let e=p;e<=u;e+=1)o[e]&&o[e].classList.add(...`${l.bulletActiveClass}-main`.split(" "));setSideBullets(e,"prev"),setSideBullets(a,"next")}}if(l.dynamicBullets){const a=Math.min(o.length,l.dynamicMainBullets+4),s=(c*a-c)/2-g*c,t=e?"right":"left";o.forEach((e=>{e.style[i.isHorizontal()?t:"top"]=`${s}px`}))}}r.forEach(((e,a)=>{if("fraction"===l.type&&(e.querySelectorAll(classesToSelector(l.currentClass)).forEach((e=>{e.textContent=l.formatFractionCurrent(t+1)})),e.querySelectorAll(classesToSelector(l.totalClass)).forEach((e=>{e.textContent=l.formatFractionTotal(u)}))),"progressbar"===l.type){let a;a=l.progressbarOpposite?i.isHorizontal()?"vertical":"horizontal":i.isHorizontal()?"horizontal":"vertical";const s=(t+1)/u;let n=1,r=1;"horizontal"===a?n=s:r=s,e.querySelectorAll(classesToSelector(l.progressbarFillClass)).forEach((e=>{e.style.transform=`translate3d(0,0,0) scaleX(${n}) scaleY(${r})`,e.style.transitionDuration=`${i.params.speed}ms`}))}"custom"===l.type&&l.renderCustom?(e.innerHTML=l.renderCustom(i,t+1,u),0===a&&o("paginationRender",e)):(0===a&&o("paginationRender",e),o("paginationUpdate",e)),i.params.watchOverflow&&i.enabled&&e.classList[i.isLocked?"add":"remove"](l.lockClass)}))}function render(){const e=i.params.pagination;if(isPaginationDisabled())return;const a=i.virtual&&i.params.virtual.enabled?i.virtual.slides.length:i.slides.length;let s=i.pagination.el;s=makeElementsArray(s);let l="";if("bullets"===e.type){let s=i.params.loop?Math.ceil(a/i.params.slidesPerGroup):i.snapGrid.length;i.params.freeMode&&i.params.freeMode.enabled&&s>a&&(s=a);for(let a=0;a<s;a+=1)e.renderBullet?l+=e.renderBullet.call(i,a,e.bulletClass):l+=`<${e.bulletElement} ${i.isElement?'part="bullet"':""} class="${e.bulletClass}"></${e.bulletElement}>`}"fraction"===e.type&&(l=e.renderFraction?e.renderFraction.call(i,e.currentClass,e.totalClass):`<span class="${e.currentClass}"></span> / <span class="${e.totalClass}"></span>`),"progressbar"===e.type&&(l=e.renderProgressbar?e.renderProgressbar.call(i,e.progressbarFillClass):`<span class="${e.progressbarFillClass}"></span>`),i.pagination.bullets=[],s.forEach((a=>{"custom"!==e.type&&(a.innerHTML=l||""),"bullets"===e.type&&i.pagination.bullets.push(...a.querySelectorAll(classesToSelector(e.bulletClass)))})),"custom"!==e.type&&o("paginationRender",s[0])}function init(){i.params.pagination=e(i,i.originalParams.pagination,i.params.pagination,{el:"swiper-pagination"});const a=i.params.pagination;if(!a.el)return;let s;"string"==typeof a.el&&i.isElement&&(s=i.el.querySelector(a.el)),s||"string"!=typeof a.el||(s=[...document.querySelectorAll(a.el)]),s||(s=a.el),s&&0!==s.length&&(i.params.uniqueNavElements&&"string"==typeof a.el&&Array.isArray(s)&&s.length>1&&(s=[...i.el.querySelectorAll(a.el)],s.length>1&&(s=s.filter((e=>l(e,".swiper")[0]===i.el))[0])),Array.isArray(s)&&1===s.length&&(s=s[0]),Object.assign(i.pagination,{el:s}),s=makeElementsArray(s),s.forEach((e=>{"bullets"===a.type&&a.clickable&&e.classList.add(...(a.clickableClass||"").split(" ")),e.classList.add(a.modifierClass+a.type),e.classList.add(i.isHorizontal()?a.horizontalClass:a.verticalClass),"bullets"===a.type&&a.dynamicBullets&&(e.classList.add(`${a.modifierClass}${a.type}-dynamic`),d=0,a.dynamicMainBullets<1&&(a.dynamicMainBullets=1)),"progressbar"===a.type&&a.progressbarOpposite&&e.classList.add(a.progressbarOppositeClass),a.clickable&&e.addEventListener("click",onBulletClick),i.enabled||e.classList.add(a.lockClass)})))}function destroy(){const e=i.params.pagination;if(isPaginationDisabled())return;let a=i.pagination.el;a&&(a=makeElementsArray(a),a.forEach((a=>{a.classList.remove(e.hiddenClass),a.classList.remove(e.modifierClass+e.type),a.classList.remove(i.isHorizontal()?e.horizontalClass:e.verticalClass),e.clickable&&(a.classList.remove(...(e.clickableClass||"").split(" ")),a.removeEventListener("click",onBulletClick))}))),i.pagination.bullets&&i.pagination.bullets.forEach((a=>a.classList.remove(...e.bulletActiveClass.split(" "))))}r("changeDirection",(()=>{if(!i.pagination||!i.pagination.el)return;const e=i.params.pagination;let{el:a}=i.pagination;a=makeElementsArray(a),a.forEach((a=>{a.classList.remove(e.horizontalClass,e.verticalClass),a.classList.add(i.isHorizontal()?e.horizontalClass:e.verticalClass)}))})),r("init",(()=>{!1===i.params.pagination.enabled?disable():(init(),render(),update())})),r("activeIndexChange",(()=>{void 0===i.snapIndex&&update()})),r("snapIndexChange",(()=>{update()})),r("snapGridLengthChange",(()=>{render(),update()})),r("destroy",(()=>{destroy()})),r("enable disable",(()=>{let{el:e}=i.pagination;e&&(e=makeElementsArray(e),e.forEach((e=>e.classList[i.enabled?"remove":"add"](i.params.pagination.lockClass))))})),r("lock unlock",(()=>{update()})),r("click",((e,a)=>{const s=a.target,l=makeElementsArray(i.pagination.el);if(i.params.pagination.el&&i.params.pagination.hideOnClick&&l&&l.length>0&&!s.classList.contains(i.params.pagination.bulletClass)){if(i.navigation&&(i.navigation.nextEl&&s===i.navigation.nextEl||i.navigation.prevEl&&s===i.navigation.prevEl))return;const e=l[0].classList.contains(i.params.pagination.hiddenClass);o(!0===e?"paginationShow":"paginationHide"),l.forEach((e=>e.classList.toggle(i.params.pagination.hiddenClass)))}}));const disable=()=>{i.el.classList.add(i.params.pagination.paginationDisabledClass);let{el:e}=i.pagination;e&&(e=makeElementsArray(e),e.forEach((e=>e.classList.add(i.params.pagination.paginationDisabledClass)))),destroy()};Object.assign(i.pagination,{enable:()=>{i.el.classList.remove(i.params.pagination.paginationDisabledClass);let{el:e}=i.pagination;e&&(e=makeElementsArray(e),e.forEach((e=>e.classList.remove(i.params.pagination.paginationDisabledClass)))),init(),render(),update()},disable:disable,render:render,update:update,init:init,destroy:destroy})}export{Pagination as P};
//# sourceMappingURL=pagination.mjs.map
